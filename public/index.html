<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§€ì›ê¸ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <script>
        // ì¸ì¦ ì²´í¬
        (async function checkAuth() {
            try {
                const response = await fetch('/api/auth/check', {
                    credentials: 'include'
                });
                const result = await response.json();
                
                if (!result.authenticated) {
                    window.location.href = '/login.html';
                }
            } catch (error) {
                console.error('ì¸ì¦ ì²´í¬ ì˜¤ë¥˜:', error);
                window.location.href = '/login.html';
            }
        })();
    </script>
    
    <div class="app-layout">
        <aside id="sidebar">
            <div class="sidebar-header">
                <h2>ê¸°ì—… ê´€ë¦¬</h2>
                <div style="display: flex; gap: 8px;">
                    <button id="change-password-btn" class="btn-icon" title="ë¹„ë°€ë²ˆí˜¸ ë³€ê²½">ğŸ”‘</button>
                    <button id="logout-btn" class="btn-icon" title="ë¡œê·¸ì•„ì›ƒ">ğŸšª</button>
                </div>
            </div>
            <nav id="company-nav-list"></nav>
            <div id="add-company-btn" class="sidebar-footer">+ ìƒˆ ê¸°ì—… ì¶”ê°€</div>
        </aside>

        <main id="main-content"></main>
    </div>

    <div id="employee-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header"><h2 id="modal-title"></h2><span class="close-btn" data-modal-id="employee-modal">&times;</span></div>
            <div class="modal-body">
                <div class="tab-nav">
                    <button class="tab-btn active" data-tab="tab-preliminary">ì‚¬ì „ ë‹¨ê³„</button>
                    <button class="tab-btn" data-tab="tab-payments">ê¸°ì—… ì§€ì›ê¸ˆ</button>
                    <button class="tab-btn" data-tab="tab-youth" id="tab-youth-btn">ì±„ìš©ì ì§€ì›ê¸ˆ</button>
                    <button class="tab-btn" data-tab="tab-memo">ë©”ëª¨/íˆìŠ¤í† ë¦¬</button>
                </div>
                <form id="employee-details-form">
                    <div id="tab-preliminary" class="tab-content active"></div>
                    <div id="tab-payments" class="tab-content"></div>
                    <div id="tab-youth" class="tab-content"></div>
                    <div id="tab-memo" class="tab-content"></div>
                    <div class="modal-footer"><button type="submit" class="btn-primary">ì €ì¥í•˜ê¸°</button></div>
                </form>
            </div>
        </div>
    </div>
    
    <div id="form-modal" class="modal">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-header">
                <h2 id="form-modal-title"></h2>
                <span class="close-btn" data-modal-id="form-modal">&times;</span>
            </div>
            <form id="generic-form">
                <div class="modal-body" id="form-modal-body">
                    </div>
                <div class="modal-footer">
                    <button type="submit" class="btn-primary">í™•ì¸</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ëª¨ë‹¬ -->
    <div id="password-modal" class="modal">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-header">
                <h2>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h2>
                <span class="close-btn" data-modal-id="password-modal">&times;</span>
            </div>
            <form id="password-change-form">
                <div class="modal-body">
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
                        <input 
                            type="password" 
                            id="current-password" 
                            name="currentPassword"
                            placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                            required
                            style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px;"
                        >
                    </div>
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
                        <input 
                            type="password" 
                            id="new-password" 
                            name="newPassword"
                            placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ (8ì ì´ìƒ)"
                            required
                            minlength="8"
                            style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px;"
                        >
                    </div>
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                        <input 
                            type="password" 
                            id="confirm-password" 
                            name="confirmPassword"
                            placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”"
                            required
                            minlength="8"
                            style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px;"
                        >
                    </div>
                    <div style="padding: 12px; background: #FFF9E6; border-radius: 8px; font-size: 13px; color: #856404;">
                        âš ï¸ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í›„ <strong>ì„œë²„ ì¬ì‹œì‘</strong>ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                        ì½˜ì†”ì— í‘œì‹œë˜ëŠ” ì•ˆë‚´ë¥¼ ë”°ë¼ì£¼ì„¸ìš”.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn-primary">ë³€ê²½í•˜ê¸°</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="loader" class="modal hidden"><div class="spinner"></div></div>
    <div id="toast-container"></div>

    <script src="js/app.js"></script>
</body>
</html>



