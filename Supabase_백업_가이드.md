# ğŸ“¦ Supabase ë°±ì—… ì „ëµ ê°€ì´ë“œ

## ğŸ¤” Supabaseë¥¼ ì“°ëŠ”ë° ë°±ì—…ì´ í•„ìš”í•œê°€?

### Supabaseê°€ ì œê³µí•˜ëŠ” ë°±ì—…

#### âœ… Supabaseì˜ ê¸°ë³¸ ë°±ì—… ê¸°ëŠ¥

| í”Œëœ | ì¼ì¼ ë°±ì—… | ë³´ê´€ ê¸°ê°„ | PITR* | ë¹„ìš© |
|------|----------|----------|-------|------|
| **Free** | âŒ ì—†ìŒ | - | âŒ | $0 |
| **Pro** | âœ… ìë™ | 7ì¼ | âœ… 7ì¼ | $25/ì›” |
| **Team** | âœ… ìë™ | 14ì¼ | âœ… 14ì¼ | $599/ì›” |
| **Enterprise** | âœ… ìë™ | ë§ì¶¤ | âœ… ë§ì¶¤ | í˜‘ì˜ |

\* PITR = Point-in-Time Recovery (íŠ¹ì • ì‹œì ìœ¼ë¡œ ë³µêµ¬)

#### í˜„ì¬ í”Œëœ í™•ì¸í•˜ê¸°
```
Supabase Dashboard â†’ Settings â†’ Billing
```

---

## ğŸ“Š ë°±ì—… í•„ìš”ì„± íŒë‹¨

### âœ… ì¶”ê°€ ë°±ì—…ì´ **í•„ìš”í•œ ê²½ìš°**

#### 1. Free í”Œëœ ì‚¬ìš© ì¤‘
```
âš ï¸ ìœ„í—˜ë„: ë†’ìŒ
- Supabase ë°±ì—… ì—†ìŒ
- ì‹¤ìˆ˜ë¡œ ë°ì´í„° ì‚­ì œ ì‹œ ë³µêµ¬ ë¶ˆê°€ëŠ¥
- ì„œë¹„ìŠ¤ ì¥ì•  ì‹œ ë°ì´í„° ì†ì‹¤ ê°€ëŠ¥
```

**ê¶Œì¥**: ë§¤ì¼ ìë™ ë°±ì—… í•„ìˆ˜!

#### 2. ì¤‘ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°
```
âš ï¸ ìœ„í—˜ë„: ë†’ìŒ
- ê³ ê° ì •ë³´
- ê¸ˆìœµ ê±°ë˜ ê¸°ë¡
- ê³„ì•½/ë²•ì  ë¬¸ì„œ
```

**ê¶Œì¥**: ìµœì†Œ ì£¼ 1íšŒ + ì¤‘ìš” ë³€ê²½ ì‹œ ìˆ˜ë™ ë°±ì—…

#### 3. ê·œì • ì¤€ìˆ˜ í•„ìš”
```
ğŸ“œ ë²•ì  ìš”êµ¬ì‚¬í•­:
- ê°œì¸ì •ë³´ë³´í˜¸ë²•: 3ë…„ ë³´ê´€
- ê·¼ë¡œê¸°ì¤€ë²•: 3ë…„ ë³´ê´€
- ìƒë²•: 10ë…„ ë³´ê´€ (ì¤‘ìš” ì„œë¥˜)
```

**ê¶Œì¥**: ë²•ì • ë³´ê´€ ê¸°ê°„ì— ë§ì¶° ë°±ì—… + ë³„ë„ ì €ì¥

#### 4. ë°ì´í„° ì´ì „ ê³„íš
```
ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œë‚˜ë¦¬ì˜¤:
- ë‹¤ë¥¸ DBë¡œ ì´ì „ ê³„íš
- ë¡œì»¬ ê°œë°œ í™˜ê²½ êµ¬ì¶•
- ë°ì´í„° ë¶„ì„ í•„ìš”
```

**ê¶Œì¥**: ì •ê¸°ì ì¸ ë°±ì—…ìœ¼ë¡œ ì´ì „ ì¤€ë¹„

---

### âš ï¸ ì¶”ê°€ ë°±ì—…ì´ **ì„ íƒì‚¬í•­ì¸ ê²½ìš°**

#### 1. Pro í”Œëœ ì´ìƒ + í…ŒìŠ¤íŠ¸/ê°œë°œ í™˜ê²½
```
âœ… ì•ˆì „ë„: ë³´í†µ
- Supabase ìë™ ë°±ì—… ìˆìŒ
- 7-14ì¼ ë³µêµ¬ ê°€ëŠ¥
- ë°ì´í„° ì†ì‹¤ ì‹œ ì˜í–¥ ì ìŒ
```

**ì„ íƒ**: ì›” 1íšŒ ë°±ì—…ìœ¼ë¡œ ì¶©ë¶„

#### 2. ë°ì´í„°ê°€ ìì£¼ ë³€ê²½ë˜ì§€ ì•ŠìŒ
```
âœ… ì•ˆì „ë„: ë³´í†µ
- ë³€ê²½ ë¹ˆë„ ë‚®ìŒ
- ë³µêµ¬ ì‹œ ì†ì‹¤ ë°ì´í„° ì ìŒ
```

**ì„ íƒ**: ì¤‘ìš” ë³€ê²½ ì‹œì—ë§Œ ìˆ˜ë™ ë°±ì—…

---

## ğŸ¯ í˜„ì‹¤ì ì¸ ë°±ì—… ì „ëµ (ì¶”ì²œ)

### ğŸ“Œ í˜„ì¬ ìƒí™©: Free í”Œëœ ì‚¬ìš© ì¤‘

ë‹¹ì‹ ì˜ ì‹œìŠ¤í…œì€ **ì¼ìë¦¬ë„ì•½ì¥ë ¤ê¸ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ**ìœ¼ë¡œ:
- âœ… ì¤‘ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„° (ê·¼ë¡œì ì •ë³´, ì§€ì›ê¸ˆ ê¸°ë¡)
- âœ… ë²•ì  ë³´ê´€ ì˜ë¬´ (ê·¼ë¡œê¸°ì¤€ë²• 3ë…„)
- âœ… Free í”Œëœ (ë°±ì—… ì—†ìŒ)

**ê²°ë¡ **: **ë°±ì—… ê°•ë ¥ ê¶Œì¥! âš ï¸**

---

## ğŸ›¡ï¸ ê¶Œì¥ ë°±ì—… ì „ëµ

### ë°©ë²• 1: ê°€ë²¼ìš´ ë°±ì—… (ê¶Œì¥ â­â­â­â­â­)

**ì¥ì **:
- êµ¬í˜„ ê°„ë‹¨ (10ë¶„ ì†Œìš”)
- ì„œë²„ ë¶€í•˜ ìµœì†Œ
- ë¬´ë£Œ

**ë‹¨ì **:
- ì„œë²„ê°€ êº¼ì§€ë©´ ë°±ì—… ì•ˆ ë¨
- Vercel ë¬´ë£Œ í”Œëœì€ ìŠ¤ì¼€ì¤„ëŸ¬ ì œí•œ

```javascript
// server.jsì— ì¶”ê°€
const cron = require('node-cron');
const fs = require('fs');

// ë§¤ì£¼ ì¼ìš”ì¼ ìƒˆë²½ 3ì‹œ ë°±ì—…
cron.schedule('0 3 * * 0', async () => {
    console.log('ğŸ“¦ ì£¼ê°„ ë°±ì—… ì‹œì‘...');
    
    try {
        const tables = ['companies', 'employees', 'company_to', 'employee_memos'];
        const backupData = {
            timestamp: new Date().toISOString(),
            version: '1.0',
            data: {}
        };
        
        for (const table of tables) {
            const { data, error } = await supabase
                .from(table)
                .select('*');
            
            if (error) throw error;
            backupData.data[table] = data;
        }
        
        // ë°±ì—… íŒŒì¼ ì €ì¥
        const date = new Date().toISOString().split('T')[0];
        const filename = `backup-${date}.json`;
        
        if (!fs.existsSync('./backups')) {
            fs.mkdirSync('./backups');
        }
        
        fs.writeFileSync(
            `./backups/${filename}`, 
            JSON.stringify(backupData, null, 2)
        );
        
        console.log(`âœ… ë°±ì—… ì™„ë£Œ: ${filename}`);
        
        // 30ì¼ ì´ìƒ ëœ ë°±ì—… ì‚­ì œ
        cleanOldBackups(30);
    } catch (error) {
        console.error('âŒ ë°±ì—… ì‹¤íŒ¨:', error);
    }
});

function cleanOldBackups(days) {
    const backupDir = './backups';
    if (!fs.existsSync(backupDir)) return;
    
    const files = fs.readdirSync(backupDir);
    const cutoff = Date.now() - (days * 24 * 60 * 60 * 1000);
    
    files.forEach(file => {
        const filePath = `${backupDir}/${file}`;
        const stats = fs.statSync(filePath);
        
        if (stats.mtimeMs < cutoff) {
            fs.unlinkSync(filePath);
            console.log(`ğŸ—‘ï¸ ì˜¤ë˜ëœ ë°±ì—… ì‚­ì œ: ${file}`);
        }
    });
}
```

**ì„¤ì¹˜**:
```bash
npm install node-cron
mkdir backups
echo "backups/" >> .gitignore
```

---

### ë°©ë²• 2: ìˆ˜ë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ (ì´ˆê°„ë‹¨ â­â­â­â­â­)

ë§¤ì£¼ ë˜ëŠ” ë§¤ì›” í•œ ë²ˆì”© ì§ì ‘ ì‹¤í–‰

```javascript
// backup.js
require('dotenv').config();
const { createClient } = require('@supabase/supabase-js');
const fs = require('fs');

const supabase = createClient(
    process.env.SUPABASE_URL,
    process.env.SUPABASE_ANON_KEY
);

async function backup() {
    console.log('ğŸ“¦ ë°±ì—… ì‹œì‘...');
    
    const tables = ['companies', 'employees', 'company_to', 'employee_memos'];
    const backupData = {
        timestamp: new Date().toISOString(),
        data: {}
    };
    
    for (const table of tables) {
        console.log(`  - ${table} ë°±ì—… ì¤‘...`);
        const { data } = await supabase.from(table).select('*');
        backupData.data[table] = data;
    }
    
    const filename = `backup-${new Date().toISOString().split('T')[0]}.json`;
    fs.writeFileSync(filename, JSON.stringify(backupData, null, 2));
    
    console.log(`âœ… ë°±ì—… ì™„ë£Œ: ${filename}`);
    console.log(`ğŸ“Š ë°ì´í„°:`);
    console.log(`  - ê¸°ì—…: ${backupData.data.companies?.length || 0}ê°œ`);
    console.log(`  - ê·¼ë¡œì: ${backupData.data.employees?.length || 0}ê°œ`);
}

backup().catch(console.error);
```

**ì‚¬ìš©ë²•**:
```bash
# ë°±ì—… ì‹¤í–‰
node backup.js

# ê²°ê³¼: backup-2026-01-29.json ìƒì„±
```

**ì¥ì **:
- ì•„ì£¼ ê°„ë‹¨
- ì–¸ì œë“  ì‹¤í–‰ ê°€ëŠ¥
- ì„œë²„ ë¶ˆí•„ìš”

**ë‹¨ì **:
- ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰í•´ì•¼ í•¨
- ìŠì–´ë²„ë¦´ ìˆ˜ ìˆìŒ

---

### ë°©ë²• 3: Supabase Dashboard ìˆ˜ë™ ë°±ì—…

#### ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•!

1. **Supabase Dashboard ì ‘ì†**
   ```
   https://supabase.com/dashboard
   ```

2. **Database > Backups**
   - (Pro í”Œëœ ì´ìƒë§Œ ê°€ëŠ¥)

3. **ë˜ëŠ” SQL Editorì—ì„œ**
   ```sql
   -- ì „ì²´ ë°ì´í„° ì¡°íšŒ í›„ CSVë¡œ ë‹¤ìš´ë¡œë“œ
   SELECT * FROM companies;
   SELECT * FROM employees;
   SELECT * FROM company_to;
   SELECT * FROM employee_memos;
   ```
   
4. **ê²°ê³¼ë¥¼ CSVë¡œ Export**
   - ê° í…Œì´ë¸”ë³„ë¡œ ë‹¤ìš´ë¡œë“œ
   - Excelì—ì„œ ì—´ê¸° ê°€ëŠ¥

---

### ë°©ë²• 4: GitHub Actions ìë™ ë°±ì—… (ê³ ê¸‰ â­â­â­)

ì„œë²„ ì—†ì´ë„ ìë™ ë°±ì—… ê°€ëŠ¥!

```yaml
# .github/workflows/backup.yml
name: Database Backup

on:
  schedule:
    - cron: '0 3 * * 0'  # ë§¤ì£¼ ì¼ìš”ì¼ ìƒˆë²½ 3ì‹œ (UTC)
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  backup:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: |
          npm install @supabase/supabase-js
      
      - name: Run backup
        env:
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_ANON_KEY: ${{ secrets.SUPABASE_ANON_KEY }}
        run: node backup.js
      
      - name: Upload backup
        uses: actions/upload-artifact@v3
        with:
          name: backup-${{ github.run_number }}
          path: backup-*.json
          retention-days: 90  # 90ì¼ ë³´ê´€
```

**ì¥ì **:
- ì™„ì „ ìë™í™”
- ì„œë²„ ë¶ˆí•„ìš”
- GitHubì— ë°±ì—… ì €ì¥
- ë¬´ë£Œ (GitHub Actions ë¬´ë£Œ ì‚¬ìš©ëŸ‰ ë‚´)

**ë‹¨ì **:
- GitHub Secrets ì„¤ì • í•„ìš”
- ì•½ê°„ ë³µì¡

---

## ğŸ’¾ ë°±ì—… ë³µì› ë°©ë²•

### ë°±ì—… íŒŒì¼ì—ì„œ ë³µì›

```javascript
// restore.js
require('dotenv').config();
const { createClient } = require('@supabase/supabase-js');
const fs = require('fs');

const supabase = createClient(
    process.env.SUPABASE_URL,
    process.env.SUPABASE_ANON_KEY
);

async function restore(filename) {
    console.log('ğŸ”„ ë³µì› ì‹œì‘...');
    
    const backupData = JSON.parse(fs.readFileSync(filename, 'utf8'));
    
    for (const [table, data] of Object.entries(backupData.data)) {
        console.log(`  - ${table} ë³µì› ì¤‘... (${data.length}ê±´)`);
        
        // ê¸°ì¡´ ë°ì´í„° ì‚­ì œ (ì£¼ì˜!)
        // await supabase.from(table).delete().neq('id', 0);
        
        // ë°ì´í„° ì‚½ì…
        const { error } = await supabase.from(table).insert(data);
        
        if (error) {
            console.error(`âŒ ${table} ë³µì› ì‹¤íŒ¨:`, error);
        } else {
            console.log(`âœ… ${table} ë³µì› ì™„ë£Œ`);
        }
    }
    
    console.log('ğŸ‰ ë³µì› ì™„ë£Œ!');
}

// ì‚¬ìš©ë²•: node restore.js backup-2026-01-29.json
const filename = process.argv[2];
if (!filename) {
    console.error('ì‚¬ìš©ë²•: node restore.js <backup-file.json>');
    process.exit(1);
}

restore(filename).catch(console.error);
```

---

## ğŸ¯ ìµœì¢… ê¶Œì¥ì‚¬í•­

### ë‹¹ì‹ ì˜ ê²½ìš° (ì¼ìë¦¬ë„ì•½ì¥ë ¤ê¸ˆ ì‹œìŠ¤í…œ)

#### âœ… ìµœì†Œí•œ êµ¬í˜„í•˜ì„¸ìš”:

1. **ìˆ˜ë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸** (5ë¶„ ì†Œìš”)
   ```bash
   # backup.js ìƒì„±
   # ë§¤ì£¼ ì›”ìš”ì¼ ì˜¤ì „ì— ì‹¤í–‰
   node backup.js
   ```

2. **ì¤‘ìš” ë³€ê²½ ì „ ë°±ì—…**
   - ëŒ€ëŸ‰ ë°ì´í„° ìˆ˜ì • ì „
   - ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸ ì „
   - ìƒˆ ê¸°ëŠ¥ ë°°í¬ ì „

3. **ì›” 1íšŒ ë°±ì—… í™•ì¸**
   - ë°±ì—… íŒŒì¼ ì¡´ì¬ í™•ì¸
   - ë³µì› í…ŒìŠ¤íŠ¸ (ê°œë°œ í™˜ê²½ì—ì„œ)

#### ğŸŒŸ ì—¬ìœ  ìˆìœ¼ë©´ ì¶”ê°€:

4. **GitHub Actions ìë™ ë°±ì—…** (30ë¶„ ì†Œìš”)
   - ì™„ì „ ìë™í™”
   - ìŠì–´ë²„ë¦´ ê±±ì • ì—†ìŒ

5. **Google Drive/Dropbox ì—°ë™**
   - ë°±ì—… íŒŒì¼ í´ë¼ìš°ë“œ ì €ì¥
   - ë‹¤ì¤‘ ë°±ì—…

---

## ğŸ’° ë¹„ìš© vs íš¨ê³¼

| ë°©ë²• | êµ¬í˜„ ì‹œê°„ | ë¹„ìš© | ì•ˆì „ì„± | ì¶”ì²œë„ |
|------|----------|------|--------|--------|
| ìˆ˜ë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ | 5ë¶„ | ë¬´ë£Œ | â­â­â­ | â­â­â­â­â­ |
| ì„œë²„ cron ìë™ ë°±ì—… | 10ë¶„ | ë¬´ë£Œ | â­â­â­â­ | â­â­â­â­ |
| GitHub Actions | 30ë¶„ | ë¬´ë£Œ | â­â­â­â­â­ | â­â­â­â­â­ |
| Supabase Pro í”Œëœ | 0ë¶„ | $25/ì›” | â­â­â­â­â­ | â­â­â­ |

---

## ğŸš¨ ì£¼ì˜ì‚¬í•­

### âš ï¸ ë°±ì—… ì‹œ ê³ ë ¤ì‚¬í•­

1. **ë¯¼ê° ì •ë³´ ì•”í˜¸í™”**
   ```javascript
   // ë°±ì—… íŒŒì¼ì— ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ ë“± í¬í•¨ë¨
   // Gitì— ì ˆëŒ€ ì˜¬ë¦¬ì§€ ë§ ê²ƒ!
   ```

2. **ìš©ëŸ‰ ê´€ë¦¬**
   ```javascript
   // ë°ì´í„°ê°€ ë§ìœ¼ë©´ ë°±ì—… íŒŒì¼ í¬ê¸° ì¦ê°€
   // ì••ì¶• ê³ ë ¤: gzip ì‚¬ìš©
   ```

3. **ë³´ê´€ ì¥ì†Œ**
   ```
   âŒ Git ì €ì¥ì†Œì— ì»¤ë°‹
   âœ… ë¡œì»¬ ë˜ëŠ” ë³„ë„ í´ë¼ìš°ë“œ ì €ì¥ì†Œ
   ```

4. **ì •ê¸°ì ì¸ ë³µì› í…ŒìŠ¤íŠ¸**
   ```
   ë°±ì—…ì´ ìˆì–´ë„ ë³µì›ì´ ì•ˆ ë˜ë©´ ë¬´ìš©ì§€ë¬¼!
   ë¶„ê¸°ë³„ë¡œ ë³µì› í…ŒìŠ¤íŠ¸ ê¶Œì¥
   ```

---

## âœ… ê²°ë¡ 

### ë‹¹ì‹ ì˜ ê²½ìš°:

**ë°±ì—… í•„ìš”ë„**: â­â­â­â­â­ (5/5) - **ê°•ë ¥ ê¶Œì¥!**

**ì´ìœ **:
- âœ… Free í”Œëœ (Supabase ë°±ì—… ì—†ìŒ)
- âœ… ì¤‘ìš” ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°
- âœ… ë²•ì  ë³´ê´€ ì˜ë¬´
- âœ… ì‹¤ìˆ˜ë¡œ ì¸í•œ ë°ì´í„° ì†ì‹¤ ìœ„í—˜

**ì¶”ì²œ ë°©ë²•**:
1. **ì§€ê¸ˆ ë‹¹ì¥**: ìˆ˜ë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ ë§Œë“¤ê¸° (5ë¶„)
2. **ì´ë²ˆ ì£¼**: ë§¤ì£¼ ì›”ìš”ì¼ ë°±ì—… ìŠµê´€í™”
3. **ì—¬ìœ  ìˆìœ¼ë©´**: GitHub Actions ìë™ ë°±ì—… (30ë¶„)

---

## ğŸš€ ì‹œì‘í•˜ê¸°

ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì–´ë“œë¦´ê¹Œìš”?
1. âœ… ìˆ˜ë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ (backup.js)
2. âœ… ë³µì› ìŠ¤í¬ë¦½íŠ¸ (restore.js)
3. âœ… GitHub Actions ì„¤ì •

ì›í•˜ì‹œëŠ” ê²ƒì„ ë§ì”€í•´ì£¼ì„¸ìš”!

---

**ì‘ì„±ì¼**: 2026-01-29  
**ë²„ì „**: 1.0

